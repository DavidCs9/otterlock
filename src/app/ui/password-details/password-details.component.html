<div class="relative">
  <h2>Password details</h2>
  <button class="absolute right-0 top-0" (click)="close()">
    <span class="icon-[tabler--x]"></span>
  </button>
</div>
<form [formGroup]="passwordDetailsForm" class="mt-3 grid grid-cols-1 gap-3">
  <input
    formControlName="site"
    type="text"
    class="w-full rounded-lg border border-slate-300 p-2"
    placeholder="Site"
    [class]="passwordDetailsForm.controls.site.invalid ? 'border-red-500' : ''"
  />
  <input
    formControlName="password"
    type="text"
    class="w-full rounded-lg border border-slate-300 p-2"
    placeholder="Password"
    [class]="
      passwordDetailsForm.controls.password.invalid ? 'border-red-500' : ''
    "
  />
  <div class="flex">
    @if (loadingPassword()) {
      <div
        class="flex w-full items-center justify-center gap-2 rounded-lg bg-primary p-2 font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50"
      >
        loading...
        <img src="../../../assets/loading_pwd.gif" alt="loading" class="h-5" />
      </div>
    } @else {
      <button
        (click)="openUpdatePassword()"
        class="flex w-full items-center justify-center gap-2 rounded-lg bg-primary p-2 font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50"
        [disabled]="passwordDetailsForm.invalid"
      >
        <span class="icon-[tabler--edit]"></span>
        Update password
      </button>
    }
    @if (loadingDelete()) {
      <img src="../../../assets/trash-animation.gif" alt="deleting" />
    } @else {
      <button (click)="openDeleteDialog()">
        <img src="../../../assets/trash.svg" alt="delete" class="h-10" />
      </button>
    }
  </div>
</form>

<dialog id="updatePasswordDialog" class="w-60 rounded-xl p-4">
  <div class="flex flex-col items-center gap-2 text-center">
    <h2>Are you sure you want to update this password?</h2>
    <div class="flex gap-2">
      <button
        class="rounded-lg bg-primary p-2 font-semibold text-white hover:opacity-50"
        (click)="handleUpdatePassword()"
      >
        Yes
      </button>
      <button
        class="rounded-lg bg-gray-500 p-2 font-semibold text-white hover:bg-gray-600"
        (click)="closeUpdatePassword()"
      >
        No
      </button>
    </div>
  </div>
</dialog>

<dialog id="deletePasswordDialog" class="w-60 rounded-xl p-4">
  <div class="flex flex-col items-center gap-2 text-center">
    <h2>Are you sure you want to delete this password?</h2>
    <div class="flex gap-2">
      <button
        class="rounded-lg bg-red-500 p-2 font-semibold text-white hover:bg-red-600"
        (click)="handleDeletePassword()"
      >
        Yes
      </button>
      <button
        class="rounded-lg bg-gray-500 p-2 font-semibold text-white hover:bg-gray-600"
        (click)="closeDeleteDialog()"
      >
        No
      </button>
    </div>
  </div>
</dialog>
